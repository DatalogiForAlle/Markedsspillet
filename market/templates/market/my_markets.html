{% extends "market/base.html" %}
{% load i18n %}

{% block title %}{% translate 'My markets' %}{% endblock %}
{% block content %}

<h3 class="mt-5 mb-3">
    {% translate 'Your markets' %}
</h3>
{% if markets %}
    <div class="table-responsive">
        <table class="table table-sm table-striped" >

            <thead>
                <tr>
                    <th>{% translate 'Market' %}</th>
                    <th>{% translate 'Created at' %}</th>
                    <th>{% translate 'Product' %}</th>
                    <th>{% translate 'Initial balance' %}</th>
                    <th>{% translate 'Cost/unit' %}</th>
                    <th>{% translate 'Parameters' %}</th>
                    <th>{% translate 'Allow robots' %}</th>
                    <th>{% translate 'Progression' %}</th>
                </tr>
            </thead>
            {% for market in markets %}

                <tr>
                    <td><a href="{% url 'market:monitor' market.market_id %}">{{ market.market_id }}</a></td>                    
                    </td>
                    <td>{{ market.created_at }}</td>
                    <td>{{ market.product_name_plural }}</td>
                    <td>{{ market.initial_balance }}</td>
                    <td>
                        Min: {{ market.min_cost }}<br>
                        Max: {{ market.max_cost }}<br>

                    </td>
                    <td>
                        Alpha: {{ market.alpha }}<br>
                        Beta: {{ market.beta }}<br>
                        Theta: {{ market.theta }}<br>
                    </td>
                    <td>
                        {% if market.allow_robots %}
                            Yes
                        {% else %}
                            No
                        {% endif %}
                    </td>
                    {% if market.game_over %}
                        <td>Game is over</td>
                    {% else %}
                        {% if market.endless %}
                        <td>Endless</td>
                        {% else %}
                        <td>Round {{ market.round|add:1 }}/{{ market.max_rounds  }}</td>
                        {% endif %}
                    {% endif %}
                </tr>
            {% endfor %}
        </table>
    </div>
{% else %}
    <p>{% translate 'You have not yet created a market.' %}</p>
{% endif %}


{% endblock content%}
